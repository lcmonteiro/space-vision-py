/**
 * ------------------------------------------------------------------------------------------------
 * File:   vision_config.h
 * Author: Luis Monteiro
 *
 * Created on oct 8, 2019, 22:00 PM
 * ------------------------------------------------------------------------------------------------
 */
#ifndef VISION_CONFIG_H
#define VISION_CONFIG_H
/**
 * std
 */
#include <string>
#include <map>
/**
 * filters
 */
#include "vision_filter_number.hpp"
/**
 * ------------------------------------------------------------------------------------------------
 * Filter - Builder
 * ------------------------------------------------------------------------------------------------
 */
using namespace std;
class FilterBuilder {
public:
    static auto Build(std::string id, FilterConfig conf) {
        /**
         * ------------------------------------------------------------------------------
         * Register
         * ------------------------------------------------------------------------------
         */
        static map<string, function<unique_ptr<VisionFilter>(FilterConfig)>> FILTERS {
            /**
             * ------------------------------------------------------
             * Number
             * ------------------------------------------------------
             */
        	{"number", [](auto conf) {
		        return make_unique<VisionFilterNumber>(conf);
	        }}
        };
        /**
         * ------------------------------------------------------------------------------
         * Process
         * ------------------------------------------------------------------------------
         */
        return FILTERS.at(id)(conf);
    }
};
/**
 * ------------------------------------------------------------------------------------------------
 * End
 * ------------------------------------------------------------------------------------------------
 */
#endif /* VISION_CONFIG_H */