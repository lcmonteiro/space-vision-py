# #################################################################################################
# -------------------------------------------------------------------------------------------------
# File:   camera_input.py
# Author: Luis Monteiro
#
# Created on nov 8, 2019, 22:00 PM
# -------------------------------------------------------------------------------------------------
# #################################################################################################

# external
from cv2            import VideoCapture                 
# internal
from vision.library import VisionInput

# #############################################################################
# -----------------------------------------------------------------------------
# Camera Input 
# -----------------------------------------------------------------------------
# #############################################################################
class CameraInput(VisionInput):

    # -----------------------------------------------------
    # initialization
    # -----------------------------------------------------
    def __init__(self, source=0):
        self.__resource = VideoCapture(int(source))
    
    # -----------------------------------------------------
    # check status
    # -----------------------------------------------------
    def good(self):
        return self.__resource.isOpened()

    # -----------------------------------------------------
    # read frame
    # -----------------------------------------------------
    def read(self):
        good, frame = self.__resource.read()
        if not good:
            raise RuntimeError("camera::read frame failed")
        return frame

# #################################################################################################
# -------------------------------------------------------------------------------------------------
# End
# -------------------------------------------------------------------------------------------------
# #################################################################################################